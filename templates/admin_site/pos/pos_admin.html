{% extends 'admin_site/base.html' %}



{% block content %}
    <br>
    <a href="{% url 'admin_site:all_products' %}" class="btn btn-dark">Select Products</a>
    <br>
    <form action="{% url 'admin_site:search_product' %}" method="get" class="my-3 ">
        {% csrf_token %}
        <div class="input-group">
            <input type="text" class="form-control" name="search" placeholder="search" required>
            <div class="input-group-append">
                <button class="btn btn-success">Search</button>
            </div>
        </div>
    </form>
    
    
    {% for message in messages %}
    <p class="alert alert-success mt-3">{{ message }}</p>
    {% endfor %}
        
        
    
  


    <table class="table table-hover text-center">
        <thead>
            <tr>
                <th>Product ID</th>
                <th>Category</th>
                <th>Product Name</th>
                <th>Size</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Amount</th>
                <th></th>
                <th></th>
             
            </tr>
            {% if list_pos %}
            <tbody>
                
                {% for list in  list_pos %}       
                <tr>
                    <td>{{ list.pos_pcode }}</td>
                    <td>{{ list.pos_category }}</td>
                    <td>{{ list.pos_name }}</td>
                    <td>{{ list.pos_size }}</td>
                    <td>{{ list.pos_price }}</td>
                    <td><a href="{% url 'admin_site:minus_qty' list.id  %}" class="btn btn-dark">-</a> <button class="btn btn-success" >{{ list.pos_quantity }}</button>  <a href="{% url 'admin_site:add_qty' list.id  %}" class="btn btn-dark">+</a></td>
                    <td>{{ list.pos_amount }} </td>

                    <form action="{% url 'admin_site:pos_cancel' list.id %}" method="POST">
                        {% csrf_token %}
                    <td><button type="submit" class="btn btn-dark">Cancel</button></td>
                    <input type="hidden" name="current_pcode" value="{{ list.pos_pcode }}">
                    <input type="hidden" name="current_qty" value="{{ list.pos_quantity }}">
                    
                    </form>

                </tr>
                {% endfor %}
            </tbody>
            {% endif %}
        </thead>
    </table>

    <br>

    

    
  
    
    {% if list_pos %}         

        {% csrf_token %}

    
          
   
        {% if user.role == "admin"%} 
        <label for="">Total Amount:</label>
        <input type="text" name="amount" style="font-weight: bolder;" value="{{ sum_amount.data }}" class="form-control" id="total_amount">
         
        <label for="">Cash</label>
        <input type="text" name="cash" class="form-control" id="cash">
         <br>
         <label for="">Change</label>
         <input type="text" class="form-control">
         <input type="submit" class="btn btn-success " name="compute" id="compute">

         {% elif user.role == "staff" %}
         <label for="">Total Amount:</label>
         <input type="text" name="total_amount" value="{{ sum_amount.data }}" class="form-control" id="total_amount" disabled>
 
         <label for="">Cash</label>
         <input type="text" name="cash" class="form-control">
         <br>
         <label for="">Change</label>
         <p id="result"></p>
         <input type="submit" class="btn btn-success " name="submit"> 
        {% endif %}
        <br>

    {% endif %}
    
    
    {% if list_pos %}

    {% if user.role == "reseller" %}
    <label for="">Total Amount:</label>
    <input type="text" name="amount" value="{{ sum_amount.data }}" class="form-control" id="total_amount">
    <br>
    <div class="text-end">
    <a href="{% url 'reseller_site:cart_reseller' %}" class="text-end  btn btn-dark">Checkout</a>
    </div>
    {% endif %}

    {% endif %}
    
     <!-- <script type="text/javascript">
        $(document).ready(function(){
            $("#compute").click(function(){
                var total_amount =parseInt($("#total_amount").val());
                var cash =parseInt($("#cash").val());
                var compute = $("#result").text(total_amount - cash);
                console.log(compute)

            })
        })
    </script>  -->
    <!-- <script>
        // alert("hello")
        let name = "pedrick"
        name = "bebeboy"
        console.log(name)
    </script> -->
    

   
   
{% endblock content %}

    